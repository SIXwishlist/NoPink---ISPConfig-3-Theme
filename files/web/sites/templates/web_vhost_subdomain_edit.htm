<h2><tmpl_var name="list_head_txt"></h2>
<p><tmpl_var name="list_desc_txt"></p>

<div class="container-fluid ">

            <input type="hidden" name="server_id" id="server_id" value="{tmpl_var name='server_id_value'}" />
            <tmpl_if name="domain_option">
            <div class="form-group container-fluid">
                <label class="control-label col-md-2" for="parent_domain_id">{tmpl_var name='parent_domain_id_txt'}</label>
                <div class="col-md-3">
                    <select class="selectize form-control" id="parent_domain_id" name="parent_domain_id" >
                        {tmpl_var name='parent_domain_id'}
                    </select>
                </div>
            </div>
            </tmpl_if>
            <div class="form-group container-fluid">
                <label class="control-label col-md-2" for="domain">{tmpl_var name='host_txt'}</label>
                <div class="col-md-6">
                    <input class="form-control" name="domain" id="domain" value="{tmpl_var name='domain'}"  type="text"  />
                </div>
            </div>
            <tmpl_if name="domain_option">
            <div class="form-group container-fluid">
                <label class="control-label col-md-2" for="sel_domain">{tmpl_var name='domain_txt'}</label>
                <div class="col-md-3">
                        <select class="selectize form-control" name="sel_domain" id="sel_domain" >
                            {tmpl_var name='domain_option'}
                        </select>
                </div>
            </div>
            <tmpl_else>
            <div class="form-group container-fluid">
                <label class="control-label col-md-2" for="parent_domain_id">{tmpl_var name='domain_txt'}</label>
                <div class="col-md-3">
                    <select class="selectize form-control" id="parent_domain_id" name="parent_domain_id" >
                        {tmpl_var name='parent_domain_id'}
                    </select>
                </div>
            </div>
            </tmpl_if>
            <div class="form-group container-fluid">
                <label class="control-label col-md-2" for="web_folder">{tmpl_var name='web_folder_txt'}</label>
                <div class="col-md-6">
                    <input class="form-control" name="web_folder" id="web_folder" value="{tmpl_var name='web_folder'}"  type="text" <tmpl_if name='fixed_folder' op='==' value='y'> readonly="readonly"</tmpl_if> />
                </div>
            </div>
            <div class="form-group container-fluid">
                <label class="control-label col-md-2" for="traffic_quota">{tmpl_var name='traffic_quota_txt'}</label>
                <div class="col-md-6">
                    <div class="input-group">
                        <input class="form-control" name="traffic_quota" id="traffic_quota" value="{tmpl_var name='traffic_quota'}"  type="text"  />
                        <div class="input-group-addon">MB <tmpl_var name='traffic_quota_exceeded_txt'></tmpl_var>
                    </div>
                </div>
            </div>
            <tmpl_if name="limit_cgi" op="==" value="y">
                <div class="form-group container-fluid">
                    <label class="control-label col-md-2" for="cgi_cb">
                        {tmpl_var name='cgi_txt'}
                    </label>
                    <div class="col-md-10">
                        <div id="cgi_cb" class="checkbox check-success">
                            {tmpl_var name='cgi'}
                        </div>
                    </div>
                </div>
            </tmpl_if>
            <tmpl_if name="limit_ssi" op="==" value="y">
                <div class="form-group container-fluid">
                    <label class="control-label col-md-2" for="ssi_cb">
                        {tmpl_var name='ssi_txt'}
                    </label>
                    <div class="col-md-10">
                        <div id="ssi_cb" class="checkbox check-success">
                            {tmpl_var name='ssi'}
                        </div>
                    </div>
                </div>
            </tmpl_if>
            <tmpl_if name="limit_perl" op="==" value="y">
                <div class="form-group container-fluid apache">
                    <label class="control-label col-md-2" for="perl_cb">
                        {tmpl_var name='perl_txt'}
                    </label>
                    <div class="col-md-10">
                        <div id="perl_cb" class="checkbox check-success">
                            {tmpl_var name='perl'}
                        </div>
                    </div>
                </div>
            </tmpl_if>
            <tmpl_if name="limit_ruby" op="==" value="y">
                <div class="form-group container-fluid apache">
                    <label class="control-label col-md-2" for="ruby_cb">
                        {tmpl_var name='ruby_txt'}
                    </label>
                    <div class="col-md-10">
                        <div id="ruby_cb" class="checkbox check-success">
                            {tmpl_var name='ruby'}
                        </div>
                    </div>
                </div>
            </tmpl_if>
            <tmpl_if name="limit_python" op="==" value="y">
                <div class="form-group container-fluid apache">
                    <label class="control-label col-md-2" for="python_cb">
                        {tmpl_var name='python_txt'}
                    </label>
                    <div class="col-md-10">
                        <div id="python_cb" class="checkbox check-success">
                            {tmpl_var name='python'}
                        </div>
                    </div>
                </div>
            </tmpl_if>
            <tmpl_if name="force_suexec" op="==" value="n">
                <div class="form-group container-fluid apache">
                    <label class="control-label col-md-2" for="suexec_cb">
                        {tmpl_var name='suexec_txt'}
                    </label>
                    <div class="col-md-10">
                        <div id="suexec_cb" class="checkbox check-success">
                            {tmpl_var name='suexec'}
                        </div>
                    </div>
                </div>
            </tmpl_if>
            <tmpl_if name="limit_hterror" op="==" value="y">
                <div class="form-group container-fluid">
                    <label class="control-label col-md-2" for="errordocs_cb">
                        {tmpl_var name='errordocs_txt'}
                    </label>
                    <div class="col-md-10">
                        <div id="errordocs_cb" class="checkbox check-success">
                            {tmpl_var name='errordocs'}
                        </div>
                    </div>
                </div>
            </tmpl_if>

            <div class="form-group container-fluid">
                <label class="control-label col-md-2" for="subdomain">{tmpl_var name='subdomain_txt'}</label>
                <div class="col-md-3">
                    <select class="selectize form-control" name="subdomain" id="subdomain" >
                        {tmpl_var name='subdomain'}
                    </select>
                </div>
            </div>
            <tmpl_if name="limit_ssl" op="==" value="y">
                <div class="form-group container-fluid">
                    <label class="control-label col-md-2" for="ssl_cb">
                        {tmpl_var name='ssl_txt'}
                    </label>
                    <div class="col-md-10">
                        <div id="ssl_cb" class="checkbox check-success">
                            {tmpl_var name='ssl'}
                        </div>
                    </div>
                </div>
            </tmpl_if>
            <div class="form-group container-fluid">
                <label class="control-label col-md-2" for="php">{tmpl_var name='php_txt'}</label>
                <div class="col-md-3">
                    <select class="selectize form-control" name="php" id="php" >
                        {tmpl_var name='php'}
                    </select>
                </div>
            </div>
            <div class="form-group container-fluid fastcgi_php_version">
                <label class="control-label col-md-2" for="fastcgi_php_version">{tmpl_var name='fastcgi_php_version_txt'}</label>
                <div class="col-md-3">
                    <select class="selectize form-control" name="fastcgi_php_version" id="fastcgi_php_version" >
                        {tmpl_var name='fastcgi_php_version'}
                    </select>
                </div>
            </div>
            <div class="form-group container-fluid">
                <label class="control-label col-md-2" for="active_cb">
                    {tmpl_var name='active_txt'}
                </label>
                <div class="col-md-10">
                    <div id="active_cb" class="checkbox check-success">
                        {tmpl_var name='active'}
                    </div>
                </div>
            </div>

    <input type="hidden" name="id" value="{tmpl_var name='id'}">

    <div class="container-fluid form-group">
        <div class="col-md-offset-2">
            <button id="dom-edit-submit" class="positive btn " type="button" value="{tmpl_var name='btn_save_txt'}"><span><span class="glyphicon glyphicon-ok"></span> {tmpl_var name='btn_save_txt'}</span></button>
            <button class="negative btn " type="button" value="{tmpl_var name='btn_cancel_txt'}" onclick="loadContent('sites/web_vhost_subdomain_list.php');"><span><span class="glyphicon glyphicon-remove"></span> {tmpl_var name='btn_cancel_txt'}</span></button>
        </div>
    </div>

</div>
<script language="JavaScript" type="text/javascript">
    var serverId;
    var clientGroupId = jQuery('#client_group_id').val();
    var serverIdDisabled = jQuery('#server_id_disabled').val();
    if(serverIdDisabled > 0){
        serverId = serverIdDisabled;
    } else {
        serverId = jQuery('#server_id').val();
        jQuery('#server_id').change(function(){
            serverId = $(this).val();
            adjustForm();
            reloadWebIP();
            reloadFastcgiPHPVersions();
        });
    }
    reloadServerId(true);
		
    jQuery('#client_group_id').change(function(){
        clientGroupId = $(this).val();
        reloadWebIP();
    });
		
    if(jQuery('#php').val() == 'fast-cgi' || jQuery('#php').val() == 'php-fpm'){
        jQuery('.fastcgi_php_version:hidden').show();
    } else {
        jQuery('.fastcgi_php_version:visible').hide();
    }
    jQuery('#php').change(function(){
        reloadFastcgiPHPVersions();
        if(jQuery(this).val() == 'fast-cgi' || jQuery(this).val() == 'php-fpm'){
            jQuery('.fastcgi_php_version:hidden').show();
        } else {
            jQuery('.fastcgi_php_version:visible').hide();
        }
    });
    jQuery('#parent_domain_id').change(function() {
        reloadServerId(false);
    });
    
    function reloadServerId(noFormChange) {
        var parentWebId = jQuery('#parent_domain_id').val();
        jQuery.getJSON('sites/ajax_get_json.php'+ '?' + Math.round(new Date().getTime()), {web_id : parentWebId, type : "getserverid"}, function(data) {
            if(data.serverid) serverId = data.serverid;
            adjustForm(noFormChange);
            if(noFormChange) reloadFastcgiPHPVersions(noFormChange);
        });
    }
    
    function adjustForm(noFormChange){
        jQuery.getJSON('sites/ajax_get_json.php'+ '?' + Math.round(new Date().getTime()), {server_id : serverId, type : "getservertype"}, function(data) {
            if(data.servertype == "nginx"){
                var selected = jQuery('#php').val();
                jQuery('.apache').hide();
                if(selected != "no" && selected != "php-fpm") {
                    jQuery('#php option[value="php-fpm"]').attr('selected', 'selected').val('php-fpm');
                }
                jQuery('#php option[value="fast-cgi"]').hide();
                jQuery('#php option[value="cgi"]').hide();
                jQuery('#php option[value="mod"]').hide();
                jQuery('#php option[value="suphp"]').hide();
            } else {
                jQuery('.apache').show();
                jQuery('#php option[value="fast-cgi"]').show();
                jQuery('#php option[value="cgi"]').show();
                jQuery('#php option[value="mod"]').show();
                jQuery('#php option[value="suphp"]').show();
            }
            if(noFormChange) {
                resetFormChanged();
                jQuery('#php').addClass('no-page-form-change').change();
                jQuery('#php').removeClass('no-page-form-change');
            } else {
                jQuery('#php').change();
            }
        });
    }
		
    function reloadWebIP() {
        loadOptionInto('ip_address','sites/ajax_get_ip.php?ip_type=IPv4&server_id='+serverId+'&client_group_id='+clientGroupId);
        loadOptionInto('ipv6_address','sites/ajax_get_ip.php?ip_type=IPv6&server_id='+serverId+'&client_group_id='+clientGroupId);
    }
		
    function reloadFastcgiPHPVersions(noFormChange) {
        jQuery.getJSON('sites/ajax_get_json.php'+ '?' + Math.round(new Date().getTime()), {server_id : serverId, php_type : jQuery('#php').val(), type : "getphpfastcgi"}, function(data) {
            var options = '<option value="">Default</option>';
            var phpfastcgiselected = '';
            $.each(data, function(key, val) {
                if($('#fastcgi_php_version').val() == key){
                    phpfastcgiselected = ' selected="selected"';
                } else {
                    phpfastcgiselected = '';
                }
                options += '<option value="'+key+'"'+phpfastcgiselected+'>'+val+'</option>';
            });
            $('#fastcgi_php_version').html(options).change();
            if(noFormChange) resetFormChanged();
        });
    }
    
    <tmpl_if name="readonly_tab">
        jQuery('div.panel_web_domain').find('fieldset').find('input,select,button').bind('click mousedown', function(e) { e.preventDefault(); }).focus(function() { $(this).blur(); });
        jQuery('#dom-edit-submit').click(function() {
               submitForm('pageForm','sites/web_vhost_subdomain_edit.php');
        });
    <tmpl_else>
        jQuery('#dom-edit-submit').click(function() {
            submitForm('pageForm','sites/web_vhost_subdomain_edit.php');
        });
    </tmpl_if>
			
</script>


<!-- switchery script -->
<script>
    var elems = Array.prototype.slice.call(document.querySelectorAll('.switchery'));
    // Success color: #10CFBD
    elems.forEach(function(html) {
        var switchery = new Switchery(html, {color: '#10CFBD'});
    });
</script>