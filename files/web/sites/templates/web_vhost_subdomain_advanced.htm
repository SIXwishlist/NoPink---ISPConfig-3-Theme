<h2><tmpl_var name="list_head_txt"></h2>
<p><tmpl_var name="list_desc_txt"></p>

<div class="container-fluid">

    <input class="form-control" name="document_root" id="document_root" value="{tmpl_var name='document_root'}"  type="hidden"  />
    <div class="form-group container-fluid">
        <label class="control-label col-md-2" for="system_user ">{tmpl_var name='system_user_txt'}</label>
        <div class="col-md-6">
            <div class="form-control" id="system_user ">{tmpl_var name='system_user'}</div>
        </div>
        <input class="form-control" name="system_user" id="system_user" value="{tmpl_var name='system_user'}" type="hidden" />
    </div>
    <div class="form-group container-fluid">
        <label class="control-label col-md-2" for="system_group ">{tmpl_var name='system_group_txt'}</label>
        <div class="col-md-6">
            <div class="form-control" id="system_group ">{tmpl_var name='system_group'}</div>
        </div>
        <input class="form-control" name="system_group" id="system_group" value="{tmpl_var name='system_group'}" type="hidden" />
    </div>
    <div class="form-group container-fluid apache">
        <label class="control-label col-md-2" for="allow_override">{tmpl_var name='allow_override_txt'}</label>
        <div class="col-md-6">
            <input class="form-control" name="allow_override" id="allow_override" value="{tmpl_var name='allow_override'}"  type="text"  />
        </div>
    </div>
    <div class="phpfpm">
        <div class="form-group container-fluid">
            <label class="control-label col-md-2" for="php_fpm_use_socket_cb">
                {tmpl_var name='php_fpm_use_socket_txt'}
            </label>
            <div class="col-md-10">
                <div id="php_fpm_use_socket_cb" class="checkbox check-success">
                    {tmpl_var name='php_fpm_use_socket'}
                </div>
            </div>
        </div>
        <div class="form-group container-fluid">
            <label class="control-label col-md-2" for="pm">{tmpl_var name='pm_txt'}</label>
            <div class="col-md-3">
                <select class="selectize form-control" name="pm" id="pm" >
                    {tmpl_var name='pm'}
                </select>
            </div>
        </div>
        <div class="form-group container-fluid pm_ondemand" style="background: #ffdfdf; border: 1px solid #df7d7d; border-width: 1px 0; margin: 1.5em 0 1.5em 0; padding: 7px;">
            {tmpl_var name='pm_ondemand_hint_txt'}
        </div>
        <div class="form-group container-fluid">
            <label class="control-label col-md-2" for="pm_max_children">{tmpl_var name='pm_max_children_txt'}</label>
            <div class="col-md-6">
                <input class="form-control" name="pm_max_children" id="pm_max_children" value="{tmpl_var name='pm_max_children'}"  type="text"  />
            </div>
        </div>
        <div class="form-group container-fluid pm_dynamic">
            <label class="control-label col-md-2" for="pm_start_servers">{tmpl_var name='pm_start_servers_txt'}</label>
            <div class="col-md-6">
                <input class="form-control" name="pm_start_servers" id="pm_start_servers" value="{tmpl_var name='pm_start_servers'}"  type="text"  />
            </div>
        </div>
        <div class="form-group container-fluid pm_dynamic">
            <label class="control-label col-md-2" for="pm_min_spare_servers">{tmpl_var name='pm_min_spare_servers_txt'}</label>
            <div class="col-md-6">
                <input class="form-control" name="pm_min_spare_servers" id="pm_min_spare_servers" value="{tmpl_var name='pm_min_spare_servers'}"  type="text"  />
            </div>
        </div>
        <div class="form-group container-fluid pm_dynamic">
            <label class="control-label col-md-2" for="pm_max_spare_servers">{tmpl_var name='pm_max_spare_servers_txt'}</label>
            <div class="col-md-6">
                <input class="form-control" name="pm_max_spare_servers" id="pm_max_spare_servers" value="{tmpl_var name='pm_max_spare_servers'}"  type="text"  />
            </div>
        </div>
        <div class="form-group container-fluid pm_ondemand">
            <label class="control-label col-md-2" for="pm_process_idle_timeout">{tmpl_var name='pm_process_idle_timeout_txt'}</label>
            <div class="col-md-6">
                <div class="input-group">
                    <input class="form-control" name="pm_process_idle_timeout" id="pm_process_idle_timeout" value="{tmpl_var name='pm_process_idle_timeout'}"  type="text"  />
                    <div class="input-group-addon">s</div>
                </div>
            </div>
        </div>
        <div class="form-group container-fluid">
            <label class="control-label col-md-2" for="pm_max_requests">{tmpl_var name='pm_max_requests_txt'}</label>
            <div class="col-md-6">
                <input class="form-control" name="pm_max_requests" id="pm_max_requests" value="{tmpl_var name='pm_max_requests'}"  type="text"  />
            </div>
        </div>
    </div>
    <div class="form-group container-fluid">
        <label class="control-label col-md-2" for="php_open_basedir">{tmpl_var name='php_open_basedir_txt'}</label>
        <div class="col-md-6">
            <input class="form-control" name="php_open_basedir" id="php_open_basedir" value="{tmpl_var name='php_open_basedir'}"  type="text"  />
        </div>
    </div>
    <div class="form-group container-fluid">
        <label class="control-label col-md-2" for="custom_php_ini">{tmpl_var name='custom_php_ini_txt'}</label>
        <div class="col-md-6">
            <textarea name="custom_php_ini" id="custom_php_ini" class="form-control">{tmpl_var name='custom_php_ini'}</textarea>&nbsp;<b>{tmpl_var name="available_php_directive_snippets_txt"}</b><br><br>&nbsp;{tmpl_var name="php_directive_snippets_txt"}
        </div>
    </div>
    <div class="form-group container-fluid apache">
        <label class="control-label col-md-2" for="apache_directives">{tmpl_var name='apache_directives_txt'}</label>
        <div class="col-md-6">
            <textarea name="apache_directives" id="apache_directives" class="form-control">{tmpl_var name='apache_directives'}</textarea>&nbsp;<b>{tmpl_var name="available_apache_directive_snippets_txt"}</b><br><br>&nbsp;{tmpl_var name="apache_directive_snippets_txt"}
        </div>
    </div>
    <div class="form-group container-fluid nginx">
        <label class="control-label col-md-2" for="nginx_directives">{tmpl_var name='nginx_directives_txt'}</label>
        <div class="col-md-6">
            <textarea name="nginx_directives" id="nginx_directives" class="form-control">{tmpl_var name='nginx_directives'}</textarea>&nbsp;<b>{tmpl_var name="available_nginx_directive_snippets_txt"}</b><br><br>&nbsp;{tmpl_var name="nginx_directive_snippets_txt"}<br>----<br><b>&nbsp;{tmpl_var name='variables_txt'}:</b> <a href="javascript:void(0);" class="addPlaceholder">{DOCROOT}</a>, <a href="javascript:void(0);" class="addPlaceholder">{FASTCGIPASS}</a>
        </div>
    </div>
    <div class="form-group container-fluid proxy">
        <label class="control-label col-md-2" for="proxy_directives">{tmpl_var name='proxy_directives_txt'}</label>
        <div class="col-md-6">
            <textarea name="proxy_directives" id="proxy_directives" class="form-control">{tmpl_var name='proxy_directives'}</textarea>&nbsp;<b>{tmpl_var name="available_proxy_directive_snippets_txt"}</b><br><br>&nbsp;{tmpl_var name="proxy_directive_snippets_txt"}
        </div>
    </div>

    <input type="hidden" name="id" value="{tmpl_var name='id'}">

    <div class="container-fluid form-group">
        <div class="col-md-offset-2">
            <button class="positive btn " type="button" value="{tmpl_var name='btn_save_txt'}" onclick="submitForm('pageForm','sites/web_vhost_subdomain_edit.php');"><span><span class="glyphicon glyphicon-ok"></span> {tmpl_var name='btn_save_txt'}</span></button>
            <button class="negative btn " type="button" value="{tmpl_var name='btn_cancel_txt'}" onclick="loadContent('sites/web_vhost_subdomain_list.php');"><span><span class="glyphicon glyphicon-remove"></span> {tmpl_var name='btn_cancel_txt'}</span></button>
        </div>
    </div>

</div>
<script language="JavaScript" type="text/javascript">
    var webId = jQuery('input[name="id"]').val();
    var serverId;
    getServerId();
    adjustForm();
		
    var pm = jQuery('#pm').val();
    pmMode(pm);
    jQuery('#pm').change(function(){
        pm = jQuery(this).val();
        pmMode(pm);
    });
		
    function pmMode(pm){
        switch(pm){
            case "static":
                jQuery('.pm_dynamic').add('.pm_ondemand').hide();
                jQuery('.pm_static').show();
                break;
            case "dynamic":
                jQuery('.pm_static').add('.pm_ondemand').hide();
                jQuery('.pm_dynamic').show();
                break;
            case "ondemand":
                jQuery('.pm_static').add('.pm_dynamic').hide();
                jQuery('.pm_ondemand').show();
                break;
        }
    }
		
    function getServerId(){
        jQuery.getJSON('sites/ajax_get_json.php'+ '?' + Math.round(new Date().getTime()), {web_id : webId, type : "getserverid"}, function(data) {
            serverId = data.serverid;
        });
    }
		
    function adjustForm(){
        jQuery.getJSON('sites/ajax_get_json.php'+ '?' + Math.round(new Date().getTime()), {server_id : serverId, type : "getservertype"}, function(data) {
            if(data.servertype == "nginx"){
                jQuery('.nginx').show();
                jQuery('.apache').hide();
            } else {
                jQuery('.nginx').hide();
                jQuery('.apache').show();
            }
        });
        jQuery.getJSON('sites/ajax_get_json.php'+ '?' + Math.round(new Date().getTime()), {web_id : webId, type : "getphptype"}, function(data) {
            if(data.phptype == "php-fpm"){
                jQuery('.phpfpm').show();
            } else {
                jQuery('.phpfpm').hide();
            }
        });
		jQuery.getJSON('sites/ajax_get_json.php'+ '?' + Math.round(new Date().getTime()), {web_id : webId, type : "getredirecttype"}, function(data) {
            if(data.redirecttype == "proxy"){
                jQuery('.proxy').show();
            } else {
                jQuery('.proxy').hide();
            }
        });
    }
			
</script>


<!-- switchery script -->
<script>
    var elems = Array.prototype.slice.call(document.querySelectorAll('.switchery'));
    // Success color: #10CFBD
    elems.forEach(function(html) {
        var switchery = new Switchery(html, {color: '#10CFBD'});
    });
</script>